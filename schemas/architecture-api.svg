<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="619px" height="504px" version="1.1"><defs/><g transform="translate(0.5,0.5)"><path d="M 94 357 C 20 357 1 382 60 387 C 1 398 68 422 116 412 C 149 432 260 432 297 412 C 371 412 371 392 325 382 C 371 362 297 342 232 352 C 186 337 112 337 94 357 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(153,352)"><switch><foreignObject pointer-events="all" width="66" height="62" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.26; vertical-align: top; width: 66px; white-space: normal; font-style: italic; text-align: center;"><div style="display:inline-block;text-align:inherit;text-decoration:inherit;" xmlns="http://www.w3.org/1999/xhtml">VARNISH<br /><br /><br /><br /></div></div></foreignObject><text x="33" y="37" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-style="italic">[Not supported by viewer]</text></switch></g><rect x="239" y="142" width="90" height="50" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(259,152)"><switch><foreignObject pointer-events="all" width="50" height="32" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.26; vertical-align: top; width: 50px; white-space: normal; text-align: center;"><div style="display:inline-block;text-align:inherit;text-decoration:inherit;" xmlns="http://www.w3.org/1999/xhtml">NGINX <br />(Lua)</div></div></foreignObject><text x="25" y="22" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="217" y="370" width="90" height="30" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(230,378)"><switch><foreignObject pointer-events="all" width="65" height="17" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.26; vertical-align: top; width: 65px; white-space: normal; text-align: center;"><div style="display:inline-block;text-align:inherit;text-decoration:inherit;" xmlns="http://www.w3.org/1999/xhtml">api1.local</div></div></foreignObject><text x="33" y="15" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><ellipse cx="39" cy="10" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 39 17 L 39 42 M 39 22 L 24 22 M 39 22 L 54 22 M 39 42 L 24 62 M 39 42 L 54 62" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="479" y="247" width="90" height="30" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(488,255)"><switch><foreignObject pointer-events="all" width="72" height="17" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.26; vertical-align: top; width: 72px; white-space: normal; text-align: center;"><div style="display:inline-block;text-align:inherit;text-decoration:inherit;" xmlns="http://www.w3.org/1999/xhtml">oauth.local</div></div></foreignObject><text x="36" y="15" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 329 167 L 514 167 Q 524 167 524 177 L 524 241" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 524 246 L 521 239 L 524 241 L 528 239 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="347" y="161" width="229" height="14" stroke-width="0"/><text x="461" y="171">GET /oauth/verifToken?access_token=xxx (2)</text></g><rect x="411" y="452" width="50" height="50" fill="none" stroke="none" pointer-events="none"/><path d="M 479 262 L 317 262 Q 307 262 307 252 L 307 198" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 307 193 L 310 200 L 307 198 L 303 200 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" font-size="11px"><rect fill="#ffffff" stroke="none" x="359" y="230" width="87" height="67" stroke-width="0"/><text x="360" y="240">{</text><text x="360" y="253">"rateLimit" : 1000, </text><text x="360" y="266">"expires" : "...",</text><text x="360" y="279">"roles" : "USER"</text><text x="360" y="292">} (3)</text></g><rect x="433" y="352" width="184" height="42" fill="none" stroke="none" pointer-events="none"/><g transform="translate(433,352)"><switch><foreignObject pointer-events="all" width="186" height="44" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.26; vertical-align: top; width: 184px; height: 42px; white-space: nowrap;"><table align="center"><tbody><tr><td><b><br /></b></td><td><b>token<br /></b></td><td><b>name<br /></b></td><td><b>rateLimit<br /></b></td><td><b>roles<br /></b></td></tr><tr><td><br /></td><td>xxx<br /></td><td>client1<br /></td><td>1000<br /></td><td>USER<br /></td></tr></tbody></table></div></foreignObject><text x="93" y="28" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 524 277 L 525 346" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 525 351 L 521 344 L 525 346 L 528 344 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="441" y="302" width="169" height="27" stroke-width="0"/><text x="525" y="312">select * from token </text><text x="525" y="325">where token = xxx and valid = true</text></g><path d="M 262 192 L 262 364" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 262 369 L 258 362 L 262 364 L 265 362 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="154" y="238" width="130" height="27" stroke-width="0"/><text x="219" y="248">GET /api1/resources</text><text x="219" y="261">X-ARTE-Roles : USER (5)</text></g><path d="M 285 370 L 284 198" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 284 193 L 288 200 L 284 198 L 281 200 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="270" y="319" width="103" height="27" stroke-width="0"/><text x="321" y="322">Vary: X-ARTE-Roles</text><text x="321" y="335">{"json" : ...} (6)</text></g><rect x="81" y="370" width="90" height="30" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(94,378)"><switch><foreignObject pointer-events="all" width="65" height="17" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.26; vertical-align: top; width: 65px; white-space: normal; text-align: center;"><div style="display:inline-block;text-align:inherit;text-decoration:inherit;" xmlns="http://www.w3.org/1999/xhtml">api2.local</div></div></foreignObject><text x="33" y="15" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 11 149 C 11 133 66 133 66 149 L 66 185 C 66 201 11 201 11 185 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 11 149 C 11 161 66 161 66 149" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(16,160)"><switch><foreignObject pointer-events="all" width="45" height="17" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.26; vertical-align: top; width: 45px; white-space: normal; text-align: center;"><div style="display:inline-block;text-align:inherit;text-decoration:inherit;" xmlns="http://www.w3.org/1999/xhtml">cache</div></div></foreignObject><text x="23" y="15" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><path d="M 239 167 L 163 167 Q 153 167 143 167 L 72 167" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 67 167 L 74 164 L 72 167 L 74 171 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="102" y="161" width="103" height="14" stroke-width="0"/><text x="153" y="171">save + increment (4)</text></g><path d="M 49 52 L 251 52 Q 261 52 261 62 L 261 136" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 261 141 L 258 134 L 261 136 L 265 134 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="74" y="49" width="216" height="27" stroke-width="0"/><text x="181" y="72">GET /api1/resouces?access_token=xxx (1)</text></g><path d="M 307 142 L 307 18 Q 307 8 307 8 L 307 8 Q 307 8 297 8 L 53 8" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 48 8 L 55 5 L 53 8 L 55 12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="#ffffff" stroke="none" x="208" y="2" width="73" height="14" stroke-width="0"/><text x="244" y="12">{"json" : ...} (7)</text></g></g></svg>